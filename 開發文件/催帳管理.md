# 催帳管理頁面開發評估
帳務管理得延伸，統計帳務管理資料表，借方金額加總 減 貸方金額加總，以駕駛去搜尋並統計加減如果是負數列出駕駛名字、身分證字號、金額等

## 可行性分析
- 既有 `accounting_records` 資料表已含駕駛識別欄位 (`driver_id`、`driver_name`、`driver_id_number`) 與借貸金額 (`debit_amount`、`credit_amount`)，可直接以駕駛為單位進行 SUM 彙總（參考 `開發文件/帳務管理.md:204`）。
- 現有索引涵蓋 `driver_id`、`driver_id_number` 與 `transaction_date`，搭配 `whereNull('deleted_at')` 可高效搜尋並排除軟刪資料。
- 使用 Eloquent/Query Builder 實作 `groupBy(driver_id, driver_name, driver_id_number)` 並計算 `SUM(debit_amount) - SUM(credit_amount)`，可配合 `havingRaw(balance < 0)` 過濾只顯示負數餘額名單。
- 既有 `AccountingRecordService` 已提供搜尋、列表與統計基礎功能（`開發文件/帳務管理.md:629`），新增專用方法即可整合既有流程。

## 建議開發步驟
1. 後端新增彙總查詢服務：支援駕駛姓名/身分證/車牌等搜尋條件、可選日期範圍，以及負餘額篩選與排序。
2. 建立對應 Controller/API 與路由，回傳駕駛姓名、身分證、借方總額、貸方總額及餘額。
3. 前端新增「催帳管理」頁面，沿用現有搜尋列 + 表格 UI，支援分頁、排序與導覽至帳務明細。
4. 補充權限控管與資料驗證，僅授權角色可檢視；處理未綁定 `driver_id` 的帳務記錄（可排除或標示為「未綁定駕駛」）。

## 注意事項
- 明確定義統計期間（全部歷史或指定區間），並維持與帳務管理頁相同的金額格式與幣別顯示。
- 彙總以 `driver_id` 為主，冗餘欄位僅作為顯示用途；若缺少 `driver_id`，需決定顯示策略。
- 建議新增單元測試覆蓋彙總查詢邏輯，並對催帳頁面執行基本功能測試（搜尋、分頁、權限）。
